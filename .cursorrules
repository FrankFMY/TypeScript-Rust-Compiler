# Cursor Rules for TypeScript-Rust-Compiler

## ğŸ¯ Project Goals
This is a TypeScript to Rust compiler project with the following goals:
- Complete TypeScript feature support
- High-performance compilation
- Idiomatic Rust code generation
- Full type safety preservation

## ğŸš€ Development Priorities
1. **Speed** - Compilation should be lightning-fast
2. **Completeness** - Support 100% of TypeScript features
3. **Performance** - Generated Rust code should be optimal
4. **Compatibility** - Full backward compatibility with existing TS projects

## ğŸ—ï¸ Architecture
```
typescript-rust-compiler/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lexer/          # Lexical analysis
â”‚   â”œâ”€â”€ parser/         # Syntax analysis
â”‚   â”œâ”€â”€ ast/            # AST structures
â”‚   â”œâ”€â”€ semantic/       # Semantic analysis
â”‚   â”œâ”€â”€ types/          # Type system
â”‚   â”œâ”€â”€ generator/      # Code generation
â”‚   â”œâ”€â”€ runtime/        # Runtime support
â”‚   â””â”€â”€ cli/           # CLI interface
â”œâ”€â”€ tests/              # Test suite
â”œâ”€â”€ examples/          # Example projects
â””â”€â”€ docs/              # Documentation
```

## ğŸ”§ Technical Stack
- **Language**: Rust (latest stable)
- **Parsing**: nom (parser combinators)
- **Generation**: quote + syn
- **CLI**: clap
- **Testing**: cargo test
- **Documentation**: rustdoc

## ğŸ“‹ Development Rules

### Code Style
- Follow rustfmt standards
- Document every public function with rustdoc
- Use thiserror for structured errors
- Profile and optimize critical paths
- Minimize unsafe code

### Testing
- Minimum 90% test coverage
- Integration tests for each TS feature
- Benchmarks for compiler performance
- Regression tests against real TS projects

### Commits
- Use conventional commits
- English commit messages
- Atomic commits, one feature at a time

### Performance
- Compilation: < 1 second for 10k LOC
- Memory: < 100MB for large projects
- Generated code: Optimal Rust without unnecessary allocations

## ğŸ¯ Key Features to Support

### Basic Types
- number â†’ i32/i64/f32/f64
- string â†’ String/&str
- boolean â†’ bool
- null/undefined â†’ Option<T>
- any â†’ Box<dyn Any>
- unknown â†’ Box<dyn Any>
- never â†’ !
- void â†’ ()

### Objects and Classes
- interfaces â†’ traits + structs
- classes â†’ structs + impl blocks
- inheritance â†’ trait bounds
- abstract classes â†’ trait definitions

### Generics
- <T> â†’ <T>
- extends â†’ trait bounds
- keyof â†’ associated types
- typeof â†’ type inference

### Modules
- import/export â†’ use/mod
- namespace â†’ mod
- ambient declarations â†’ extern

### Async
- async/await â†’ async/await
- Promise<T> â†’ Future<Output = T>
- Promise.all â†’ join!/try_join!

### Advanced Types
- Union types â†’ enums
- Intersection types â†’ trait bounds
- Conditional types â†’ associated types
- Mapped types â†’ generic implementations
- Template literals â†’ const generics

## ğŸš« Limitations and Warnings

### Do Not
- Simplify functionality for speed
- Ignore edge cases
- Break TypeScript semantics
- Generate unsafe Rust code
- Create runtime without necessity

### Note
- Some TS features may require runtime
- GC semantics may require Rc/Arc
- Dynamic typing may require trait objects
- Some optimizations may be impossible

## ğŸ“Š Success Metrics
- **Compilation Speed**: < 1s for 10k LOC
- **TS Feature Coverage**: 100%
- **Generated Code Performance**: >= original TS
- **Compatibility**: 100% with existing projects
- **Stability**: 0 critical bugs

## ğŸ”„ Development Approach
1. **MVP**: Basic types + functions (1-2 weeks)
2. **Expansion**: Classes + interfaces (1-2 weeks)
3. **Advanced**: Generics + modules (1-2 weeks)
4. **Finalization**: Optimization + testing (1 week)

## ğŸ¯ Final Goal
Create a compiler that:
- Compiles any TypeScript code to Rust
- Generates idiomatic and performant Rust code
- Preserves all TypeScript semantics and functionality
- Works faster than existing solutions
- Supports all modern TS features

**Implementation Time: 4-6 weeks**
**Quality Standard: Production-ready**